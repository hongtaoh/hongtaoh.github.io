<a name="top"></a>
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>郝鸿涛：Hongtao Hao</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/python.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>

<script>hljs.initHighlightingOnLoad();</script>



            <link rel="icon" href="https://hongtaoh.com/ht10.ico">





  </head>
  
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav" >
      <a href="/" class="nav-logo">
        <img src="/media/ht10.png"
         width="50"
         height="50"
         alt="Hongtao Hao">
      </a>

      <ul class="nav-links" >
        
        
           <li><a href="/cn/">关于</a></li>
       
           <li><a href="/cn/blog/">日志</a></li>
       
           <li><a href="/">English</a></li>
       
       
      </ul>
</nav>
      </header>

<main class = "content" role="main">
<div style="text-align: center">

<h1>如何零基础免费搭建个人网站</h1>

<p>郝鸿涛 
 / 2021-03-02 </p>

<hr/>
</div>

<span class="article-toolbar">
  
  
  
  
  
  
  
  <a href='https://github.com/hongtaoh/hongtaoh.github.io/edit/sources/content/cn/blog/2021-03-02-personal-website.md'style="font-size: 24px; color: black;" target="_blank"><i class="fa fa-edit" aria-hidden="true" title="编辑本页"></i>
  </a>
  
  
  
</span>


<aside class="toc">
Table of Contents:
<nav id="TableOfContents">
  <ul>
    <li><a href="#前期准备">前期准备</a></li>
    <li><a href="#安装-hugo">安装 Hugo</a>
      <ul>
        <li><a href="#苹果系统-mac">苹果系统 (Mac)</a></li>
        <li><a href="#微软系统-windows">微软系统 (Windows)</a></li>
      </ul>
    </li>
    <li><a href="#新建一个-hugo-网站">新建一个 Hugo 网站</a></li>
    <li><a href="#网站主题">网站主题</a></li>
    <li><a href="#新建-github-仓库">新建 GitHub 仓库</a></li>
    <li><a href="#密钥设置">密钥设置</a>
      <ul>
        <li><a href="#创建-githubworkflowsgh-pagesyml">创建 .github/workflows/gh-pages.yml</a></li>
        <li><a href="#设置-ssh-deploy-key">设置 SSH Deploy Key</a></li>
      </ul>
    </li>
    <li><a href="#设置-personal-token">设置 Personal Token</a></li>
    <li><a href="#添加-workflow">添加 workflow</a></li>
    <li><a href="#上传到-github">上传到 GitHub</a></li>
    <li><a href="#后续">后续</a>
      <ul>
        <li><a href="#修改-configtoml">修改 config.toml</a></li>
        <li><a href="#更新网站">更新网站</a></li>
        <li><a href="#只用一种语言">只用一种语言</a></li>
        <li><a href="#新添加内容">新添加内容</a></li>
        <li><a href="#自定义域名">自定义域名</a></li>
      </ul>
    </li>
  </ul>
</nav>
</aside>


<div class="body-text list-text">
<p><div class="note">
四、五年前我非常希望有一篇真正有用的教编程小白免费建个人网站的教程。我看到的基本上都是非常笼统的文章，没有非常细节的。我也理解，因为要写得很细，就要花很多时间，也很麻烦。我很想帮助别人建博客，就不嫌麻烦地写下了这篇教程。</p>
<p>如果你在这篇帖子中看到了错误，请点击本文目录上的按钮，复克 (fork) 我的个人网站之后就可以提交你的修改建议了。十分感谢！
</div></p>
<p>本教程旨在手把手帮你搭建属于你的个人网站。建站工具是<a href="https://gohugo.io/" target="_blank" rel="noreferrer noopener">Hugo</a>

 + <a href="https://github.com/" target="_blank" rel="noreferrer noopener">GitHub</a>

。两个都是免费的。完成后，你的个人网站网址是：<code>https://github用户名.github.io</code>。</p>
<h2 id="前期准备">前期准备<a href="#前期准备" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>如果你是彻彻底底的零基础：没有 GitHub 账号、不知道 HTML 和 CSS 为何物、没用过 Git，甚至连 Markdown 都不知道是什么，强烈建议你先把<a href="https://intro2code.hongtaoh.com/" target="_blank" rel="noreferrer noopener">这份教程</a>

的前三章认真读一下。读完后，你需要：</p>
<ul>
<li>
<p>注册了 GitHub 账号</p>
</li>
<li>
<p>下载了<a href="https://intro2code.hongtaoh.com/prep.html#text-editor" target="_blank" rel="noreferrer noopener">文本编辑器</a>

</p>
</li>
<li>
<p><a href="https://intro2code.hongtaoh.com/html-basics.html#windows-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85-git" target="_blank" rel="noreferrer noopener">安装 Git</a>

</p>
</li>
<li>
<p>掌握了 Markdown 的基础语法</p>
</li>
</ul>
<p>以下提到「终端」，可以理解为苹果电脑上的 Terminal / 微软系统上的 Git Bash。</p>
<p>如果你是第一次使用 git, 你可能需要设置一些内容。在终端输入 <code>git config --global user.name &quot;你的git用户名&quot;</code>, 以及 <code>git config --global user.email &quot;你的邮箱&quot;</code>。用你的 GitHub 用户名和与 GitHub 绑定的邮箱就可以。不懂的话，请参考<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE" target="_blank" rel="noreferrer noopener">这里</a>

。</p>
<h2 id="安装-hugo">安装 Hugo<a href="#安装-hugo" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<h3 id="苹果系统-mac">苹果系统 (Mac)<a href="#苹果系统-mac" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>如果你已经安装了 brew, 那么直接在 Terminal 中输入</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">brew install hugo 
</code></pre></div><p>如果你没安装 brew, 先到 <a href="https://github.com/gohugoio/hugo/releases" target="_blank" rel="noreferrer noopener">Hugo releases</a>

，找到类似 <code>hugo_0.81.0_macOS-64bit.tar.gz</code> 的文件，点击下载，并解压。需要注意的是 Hugo 一直在更新，所以你到时候看到的版本号很可能已经不是 <code>0.81.0</code>。</p>
<p>下载完之后，打开 Terminal, 输入 <code>open -a Finder /usr/local/bin</code>，然后把 <code>hugo_0.81.0_macOS-64bit</code> 文件中的 <code>hugo</code> 文件拖到 <code>/usr/local/bin</code> 当中：</p>
<pre tabindex="0"><code>└── local
    └── bin
        └── hugo
</code></pre><p>完成后，在 Terminal 中输入 <code>hugo version</code>, 如果显示 <code>Hugo Static Site Generator...</code> 证明安装成功。</p>
<h3 id="微软系统-windows">微软系统 (Windows)<a href="#微软系统-windows" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>到 <a href="https://github.com/gohugoio/hugo/releases" target="_blank" rel="noreferrer noopener">Hugo releases</a>

，找到类似 <code>hugo_0.81.0_Windows-64bit.zip</code> 的文件，点击下载，并解压。解压后的文件夹中你能看到一个 <code>hugo.exe</code> 文件。</p>
<p>找一个磁盘，D、E、F 都可以，创建一个新文件夹，命名为 <code>Hugo</code>。然后，将其打开，在里面创建两个子文件夹，分别命名为 <code>bin</code> 和 <code>sites</code>。随后，将 <code>hugo.exe</code> 拖到 <code>bin</code> 里面。</p>
<p>之后，你需要将 Hugo 添加到系统路径：打开系统高级设置、环境变量，点击用户名中的 Path, 点击编辑，点击右上角的「新建」，随后复制 <code>bin</code> 文件夹地址，粘贴，回车，最后点击确定。</p>
<p><div class="note">
以上将 Hugo 添加到系统路径的方法来自<a href="https://my.oschina.net/u/4269975" target="_blank" rel="noreferrer noopener">osc_d8t0zzig</a>

的<a href="https://my.oschina.net/u/4269975/blog/4661512" target="_blank" rel="noreferrer noopener">这篇文章</a>

，在此表示感谢。
</div></p>
<p>完成后，打开你所选用的<a href="https://intro2code.netlify.app/prep.html#terminal" target="_blank" rel="noreferrer noopener">终端</a>

，输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hugo version
</code></pre></div><p>如果显示出 Hugo 版本号，则表示安装成功。</p>
<h2 id="新建一个-hugo-网站">新建一个 Hugo 网站<a href="#新建一个-hugo-网站" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>Hugo 博客就是一个文件夹。首先你要确定把这个文件夹放在哪里。我会以放在桌面为例。</p>
<p>如果你用的是 Windows 系统，同时按下 <code>Win</code> + <code>E</code>，选中右侧导航栏中的「桌面」，右键，选择「属性」，然后选择上方的位置栏，将此路径复制下来。</p>
<p><div class="note">
以上找到桌面路径的方法参考<a href="http://www.xitonghe.com/jiaocheng/Windows10-10408.html" target="_blank" rel="noreferrer noopener">win10桌面文件夹位置在哪？</a>

，在此表示感谢。
</div></p>
<p>现在打开终端。</p>
<p>如果你用的是 Mac, 在 Terminal 中输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000">cd</span> Desktop
</code></pre></div><p>如果你用的是 Windows，打开你所选用的<a href="https://intro2code.hongtaoh.com/prep.html#terminal" target="_blank" rel="noreferrer noopener">终端</a>

，比如 git bash, 输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000">cd</span> 你刚才复制的路径
</code></pre></div><p>这部分以下的内容都是在终端中进行，不管是 Windows 还是 Mac，输入的内容一样。</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hugo new site quickstart <span style="color:#408080;font-style:italic"># quickstart 可以换成任何你想用的名称</span>
</code></pre></div><p>终端请暂时不要关闭。</p>
<h2 id="网站主题">网站主题<a href="#网站主题" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>想看所有的主题，请移步 <a href="https://themes.gohugo.io/" target="_blank" rel="noreferrer noopener">Hugo Themes</a>

。下面以我在 <a href="https://github.com/yihui/hugo-xmin" target="_blank" rel="noreferrer noopener">Hugo Xmin</a>

 和 <a href="https://themes.gohugo.io/hugo-lithium-theme/" target="_blank" rel="noreferrer noopener">Lithium</a>

 两个主题基础上设计的 <a href="https://github.com/hongtaoh/hugo-ht" target="_blank" rel="noreferrer noopener">Hugo-ht</a>

 为例。不喜欢这个主题不要紧，你先学会怎么建基础的网站，之后再去折腾<a href="https://themes.gohugo.io/" target="_blank" rel="noreferrer noopener">其他主题</a>

会容易很多。</p>
<p>现在回到终端，输入</p>
<p><div class="caution">
以下代码会将你目前 Hugo 网站中的 <code>Content</code> 文件夹和 <code>config.toml</code> 替换为 <code>Hugo-ht</code> 自带的内容。如果你当前 Hugo 网站中的 Content 文件夹及<code>config.toml</code>尚未备份，请千万不要运行以下代码！！！
</div></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000">cd</span> quickstart/themes
git clone https://github.com/hongtaoh/hugo-ht
mkdir hugo-ht-new
cp -r hugo-ht/* hugo-ht-new
rm -rf hugo-ht
mv hugo-ht-new hugo-ht
<span style="color:#008000">cd</span> ..
cp -r themes/hugo-ht/exampleSite/* .
</code></pre></div><p>记得回车。然后运行</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hugo server -D <span style="color:#408080;font-style:italic"># 这里的 D 是 draft 的意思</span>
</code></pre></div><p>打开终端显示的 <a href="http://localhost:1313/" target="_blank" rel="noreferrer noopener">http://localhost:1313/</a>

，不出意外的话你能看到和 <a href="https://hugo-ht.hongtaoh.com/" target="_blank" rel="noreferrer noopener">https://hugo-ht.hongtaoh.com/</a>

 一模一样的个人网站。</p>
<p>如果没有什么问题，在终端输入 Ctrl+C 停止预览。</p>
<p>清闲确保你已经把预览关闭，之后再往下继续。</p>
<h2 id="新建-github-仓库">新建 GitHub 仓库<a href="#新建-github-仓库" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>登陆 GitHub, 点击头像左侧的加号，再点击&rsquo;new repository'。</p>
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <a href="/media/netlify/deploy-1.png"  itemprop="contentUrl"> 
        <img itemprop="thumbnail"
            src="/media/netlify/deploy-1.png"
            
            />
    </a>
    
    <figcaption>
        <h4>新建 Github 仓库</h4>
        
    </figcaption>
    
</figure>


<p>在 Repository name 这里输入 <code>你的 GitHub 用户名.github.io</code>。Description 这里你写啥都可以。其他都不要动，点击 Create repository。</p>
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <a href="/media/cnblog/username.github.io.png"  itemprop="contentUrl"> 
        <img itemprop="thumbnail"
            src="/media/cnblog/username.github.io.png"
            
            />
    </a>
    
    <figcaption>
        <h4>新建仓库设置</h4>
        
    </figcaption>
    
</figure>


<h2 id="密钥设置">密钥设置<a href="#密钥设置" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<h3 id="创建-githubworkflowsgh-pagesyml">创建 .github/workflows/gh-pages.yml<a href="#创建-githubworkflowsgh-pagesyml" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>回到终端。确保你现在在 quickstart 文件夹的根目录。请在终端中输入 <code>pwd</code>，如果所出现的结果中 <code>quickstart</code> 后面还有东西，那就不是根目录。</p>
<p>如果你还在根目录，请输入</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir .github
mkdir .github/workflows
touch .github/workflows/gh-pages.yml
</code></pre></div><p>输入完之后回车。</p>
<h3 id="设置-ssh-deploy-key">设置 SSH Deploy Key<a href="#设置-ssh-deploy-key" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>把鼠标放在目前的终端页面。然后：</p>
<ul>
<li>
<p>苹果电脑：Cmd+N</p>
</li>
<li>
<p>微软系统：鼠标放在 git bash 最上端（白色标题位置），右键，选择 New</p>
</li>
</ul>
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <a href="/media/cnblog/windows_git_bash_new.jpg"  itemprop="contentUrl"> 
        <img itemprop="thumbnail"
            src="/media/cnblog/windows_git_bash_new.jpg"
            
            />
    </a>
    
    <figcaption>
        <h4>Windows 系统 git bash 新窗口如何打开</h4>
        
    </figcaption>
    
</figure>


<p>你会看到一个新的终端页面。</p>
<p>苹果电脑输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000">cd</span> ~/.ssh
ssh-keygen -t rsa -b <span style="color:#666">4096</span> -C <span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">$(</span>git config user.email<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span> -f gh-pages -N <span style="color:#ba2121">&#34;&#34;</span>
open -a Finder ~/.ssh 
</code></pre></div><p>回车。</p>
<p>微软系统：</p>
<p>首先试着输入</p>
<p><div class="warning">
以下的 Admin 请替换为你自己的电脑用户名！
</div></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">start /C/Users/Admin/.ssh
</code></pre></div><p>如果显示说找不到这个文件，则接着在 Git bash 中输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000">cd</span> /C/Users/Admin
start ~/.ssh
mkdir ~/.ssh/ <span style="color:#666">&amp;&amp;</span> <span style="color:#008000">cd</span> ~/.ssh
ssh-keygen -t rsa -b <span style="color:#666">4096</span> -C <span style="color:#ba2121">&#34;</span><span style="color:#008000;font-weight:bold">$(</span>git config user.email<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span> -f gh-pages -N <span style="color:#ba2121">&#34;&#34;</span>
start ~/.ssh
</code></pre></div><p>回车。此时，你会看到两个新增的文件：gh-pages 和 gh-pages.pub</p>
<p>紧接着</p>
<p>苹果电脑输入：<code>pbcopy &lt; ~/.ssh/gh-pages.pub</code></p>
<p>微软系统输入：<code>clip &lt; ~/.ssh/gh-pages.pub</code></p>
<p>现在，请回到 GitHub 你新建的仓库。把屏幕拉宽，点击 Settings -&gt; 点击 Deploy keys -&gt; 点击 Add deploy key。把鼠标放在 key 下面的文本框，苹果电脑按 Command+V，微软系统按 Control+V。在 Allow write access 那里打勾，在 Title 随便写点东西，比如“个人网站部署”，然后点击 Add key。</p>
<p>现在，回到刚才新建的终端。</p>
<p>苹果电脑输入：<code>pbcopy &lt; ~/.ssh/gh-pages</code></p>
<p>微软系统输入：<code>clip &lt; ~/.ssh/gh-pages</code></p>
<p>请再回到 GitHub 你新建的仓库。把屏幕拉宽，点击 Settings -&gt; 点击 Secrets -&gt; 点击 New repository secret。把鼠标放在 Value 下面的文本框，苹果电脑按 Command+V，微软系统按 Control+V。在 Name 那里填 ACTIONS_DEPLOY_KEY，然后点击 Add secret。</p>
<p>现在可以把这个终端窗口关闭了。</p>
<h2 id="设置-personal-token">设置 Personal Token<a href="#设置-personal-token" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>首先，打开<a href="https://github.com/settings/tokens" target="_blank" rel="noreferrer noopener">这个链接</a>

。进去后，点击 Generate new token 按钮, 在随后出现的页面中，在 Select scopes 这里选中 workflow，在 Note 那里随便写点东西，然后将页面往下拖，点击 Generate token。</p>
<p>生成之后，点击那一串字母后边的复制板，将 token 复制下来。</p>
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <a href="/media/cnblog/personal_token.png"  itemprop="contentUrl"> 
        <img itemprop="thumbnail"
            src="/media/cnblog/personal_token.png"
            
            />
    </a>
    
    <figcaption>
        <h4>复制 personal token</h4>
        
    </figcaption>
    
</figure>


<p>现在请回到 GitHub 你新建的仓库。把屏幕拉宽，点击 Settings -&gt; 点击 Secrets -&gt; 点击 New repository secret。把鼠标放在 Value 下面的文本框，苹果电脑按 Command+V，微软系统按 Control+V。在 Name 那里填 PERSONAL_TOKEN，然后点击 Add secret。</p>
<h2 id="添加-workflow">添加 workflow<a href="#添加-workflow" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>回到最开始的那个终端。（如果你把之前的终端关了，也不要紧，cd 到你的 hugo 项目就好）。</p>
<p>苹果系统输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">open .github/workflows/gh-pages.yml -a TextEdit 
</code></pre></div><p>微软系统输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">notepad .github/workflows/gh-pages.yml
</code></pre></div><p>然后复制以下内容，粘贴到刚才弹出的 gh-pages.yml:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-YAML" data-lang="YAML"><span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>github pages<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">on</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">push</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">branches</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- master <span style="color:#bbb"> </span><span style="color:#408080;font-style:italic"># Set a branch name to trigger deployment</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#008000;font-weight:bold">jobs</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#008000;font-weight:bold">deploy</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">runs-on</span>:<span style="color:#bbb"> </span>ubuntu-18.04<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#008000;font-weight:bold">steps</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#008000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>actions/checkout@v2<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">with</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">submodules</span>:<span style="color:#bbb"> </span><span style="color:#008000;font-weight:bold">true</span><span style="color:#bbb">  </span><span style="color:#408080;font-style:italic"># Fetch Hugo themes (true OR recursive)</span><span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">fetch-depth</span>:<span style="color:#bbb"> </span><span style="color:#666">0</span><span style="color:#bbb">    </span><span style="color:#408080;font-style:italic"># Fetch all history for .GitInfo and .Lastmod</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Setup Hugo<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>peaceiris/actions-hugo@v2<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">with</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">hugo-version</span>:<span style="color:#bbb"> </span><span style="color:#ba2121">&#39;0.79.1&#39;</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Build<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">run</span>:<span style="color:#bbb"> </span>hugo --minify<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Deploy<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>peaceiris/actions-gh-pages@v3<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">with</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">github_token</span>:<span style="color:#bbb"> </span>${{ secrets.PERSONAL_TOKEN }}<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">publish_branch</span>:<span style="color:#bbb"> </span>gh-pages<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">publish_dir</span>:<span style="color:#bbb"> </span>./public<span style="color:#bbb">
</span></code></pre></div><p>然后保存（Mac: Cmd+S; Windows: Control+S)。</p>
<p>终端不要关闭。</p>
<h2 id="上传到-github">上传到 GitHub<a href="#上传到-github" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<p>回到刚才的终端，输入：</p>
<p><div class="warning">
下面的代码中，请不要忘记把 USERNAME 换成你自己的 GitHub 用户名!!!!!!!!
</div></p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git init
git add .
git commit -m <span style="color:#ba2121">&#34;first commit.&#34;</span>
git remote add origin https://github.com/USERNAME/USERNAME.github.io.git
git push -u origin master
</code></pre></div><p>回车。</p>
<p><div class="note">
使用 Windows 系统的同学，如果你是第一次使用 Git，按完回车后，因为最后一步是往 GitHub 上传内容，你会被要求登陆 (Sign in) GitHub, 点击 Sign in with your browser 就可以，然后你会被要求 Authorize Git Credential Manager，点击绿色的 Authorize Git Credential Manager，在随后的页面中输入你的 GitHub 密码 (password)。随后，可能还会出现 OpenSSH 的页面，让你输入 GitHub 用户名 (Username for <code>https://github.com</code>)，按要求输入然后点击 OK 就好。Show input 可点可不点，点开的话你就可以看到你输的内容。
</div></p>
<p>现在请再回到 GitHub 你新建的仓库。把屏幕拉宽，点击 Settings，一直往下拖，到你看到 GitHub Pages 为止。在 Source 那里，Branch 选择 gh-pages, 右侧的框框选择 root，然后点 Save。等一两分钟，当出现</p>
<blockquote>
<p>Your site is published at https://USERNAME.github.io/</p>
</blockquote>
<p>点开那个链接，你的网站应该就出现了。</p>
<h2 id="后续">后续<a href="#后续" class="header-anchor" ariaLabel="Anchor"> # </a></h2>
<h3 id="修改-configtoml">修改 config.toml<a href="#修改-configtoml" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>你 Hugo 文件夹根目录下的 config.toml 有几个地方需要你自己改：</p>
<ul>
<li>
<p>baseURL: 替换成 https://USERNAME.github.io/</p>
</li>
<li>
<p>GithubEdit: 把所有的 USERNAME 换成你的 GitHub 用户名，把所有的 REPONAME 换成 github用户名.github.io</p>
</li>
<li>
<p>Params.lang 部分 <code>Your Nam</code> 和「你的名字」换成你的大名。</p>
</li>
</ul>
<h3 id="更新网站">更新网站<a href="#更新网站" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>每次修改或添加新内容后，如果更新网站呢？</p>
<p>更新的话是这样一个流程：</p>
<p>我们用 <code>git add</code> 来让 git 知道我们这次要更新什么。如果你更新的是 README.md, 那就用 <code>git add README</code>。如果你更新的是中文的博客，那就用 <code>git add cn/posts</code>。如果你修改了很多内容，不想一个一个地加，可以用 <code>git add .</code>，意思是把全部的修改、新增内容上传。</p>
<p>然后，要用到 <code>git commit -m &quot;Message&quot;</code>，比如：<code>git commit -m &quot;新增一篇博客&quot;</code>。</p>
<p>最后是上传，用 <code>git push origin master</code>。</p>
<p>总结一下，每次更新网站时，首先 <code>cd</code> 到你的 Hugo 文件夹，然后运行：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add . <span style="color:#408080;font-style:italic"># 或者如 git add README.md</span>
git commit -m <span style="color:#ba2121">&#34;请给自己留言&#34;</span>
git push origin master
</code></pre></div><p>如果你连这都觉得麻烦，可以在 Hugo 文件夹根目录下用文本编辑器新建一个文件，命名为 <code>deploy.sh</code>，把以下内容复制粘贴到里面：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git add .
<span style="color:#19177c">msg</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;updating site on </span><span style="color:#008000;font-weight:bold">$(</span>date<span style="color:#008000;font-weight:bold">)</span><span style="color:#ba2121">&#34;</span> 
git commit -m <span style="color:#ba2121">&#34;</span><span style="color:#19177c">$msg</span><span style="color:#ba2121">&#34;</span>
git push origin master
</code></pre></div><p>这样，每次上传更新时，你只需要在 <code>cd</code> 了你的 Hugo 文件夹后运行</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">bash deploy.sh
</code></pre></div><h3 id="只用一种语言">只用一种语言<a href="#只用一种语言" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p>如果你不喜欢现在的双语博客，只想留下中文，请参照以下步骤：</p>
<ol>
<li>移动文件夹</li>
</ol>
<p>打开终端，首先 cd 你的 Hugo 文件夹，然后</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp -r content/cn/about content 
<span style="color:#408080;font-style:italic">#如果你只要英文，则用 cp -r content/en/about content。</span>
cp -r content/cn/posts content
</code></pre></div><ol start="2">
<li>修改 layouts/partials/nav.html</li>
</ol>
<p>将 <code>&lt;ul class = &quot;nav-links&quot;&gt;</code> 和 <code>&lt;/ul&gt;</code> 之间的部分改为：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ $currentPage := . }}
{{ $section := replaceRE &#34;^/([^/]+)/.*&#34; &#34;$1&#34; .Permalink }}
{{ range (default .Site.Menus.main (index .Site.Menus $section)) }}
&lt;<span style="color:#008000;font-weight:bold">li</span>&gt;&lt;<span style="color:#008000;font-weight:bold">a</span> <span style="color:#7d9029">href</span><span style="color:#666">=</span><span style="color:#ba2121">&#34;{{ .URL | relURL }}&#34;</span>&gt;{{ .Name }}&lt;/<span style="color:#008000;font-weight:bold">a</span>&gt;&lt;/<span style="color:#008000;font-weight:bold">li</span>&gt;
{{ end }}
</code></pre></div><p>以上代码参考 <a href="https://daijiang.name/" target="_blank" rel="noreferrer noopener">李代江</a>

 的<a href="https://github.com/rbind/daijiang/blob/master/layouts/partials/nav.html" target="_blank" rel="noreferrer noopener">博客设置</a>

，在此表示感谢。</p>
<ol start="3">
<li>修改 config.toml</li>
</ol>
<p>打开 <code>config.toml</code>, 把 <code>[[menu.en]]</code> 和 <code>[[menu.cn]]</code> 两部分删除，然后加上：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[[menu.main]]
    name = <span style="color:#ba2121">&#34;主页&#34;</span>
    url = <span style="color:#ba2121">&#34;/&#34;</span>
    weight = <span style="color:#666">1</span>
[[menu.main]]
    name = <span style="color:#ba2121">&#34;关于&#34;</span>
    url = <span style="color:#ba2121">&#34;/about/&#34;</span>
    weight = <span style="color:#666">2</span>
[[menu.main]]
    name = <span style="color:#ba2121">&#34;博客&#34;</span>
    url = <span style="color:#ba2121">&#34;/posts/&#34;</span> 
    weight = <span style="color:#666">3</span>
</code></pre></div><p>需要注意的是， /posts/ 这个名字如果你要改的话，比如改成 /blog/，那么 <code>config.toml</code> 中 [params] 下的 <code>blogDirName = &quot;posts&quot;</code> 也要跟着改成 <code>blogDirName = &quot;blog&quot;</code>。</p>
<p>或者你可以参考<a href="https://yihui.org/" target="_blank" rel="noreferrer noopener">谢益辉</a>

 个人网站上的<a href="https://github.com/rbind/yihui/blob/master/config.yaml" target="_blank" rel="noreferrer noopener">菜单设置</a>

 来重新制作双语菜单。上面对于 <code>nav.html</code> 的修改让你可以同时有 <code>[[menu.main]]</code>、<code>[[menu.en]]</code> 和<code>[[menu.cn]]</code>。</p>
<p>另外，在 <code>params</code> 部分，把</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#408080;font-style:italic"># singleLang = true</span>
defaultLang = <span style="color:#ba2121">&#34;en&#34;</span>
</code></pre></div><p>改成</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">singleLang = <span style="color:#008000;font-weight:bold">true</span>
defaultLang = <span style="color:#ba2121">&#34;cn&#34;</span> <span style="color:#408080;font-style:italic">#如果你只用英文，则用 &#34;en&#34;</span>
</code></pre></div><h3 id="新添加内容">新添加内容<a href="#新添加内容" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<h4 id="新加一篇博客">新加一篇博客<a href="#新加一篇博客" class="header-anchor" ariaLabel="Anchor"> # </a></h4>
<p>先在终端 cd 到你的 Hugo 文件夹，然后在终端输入：</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hugo new cn/posts/2021-04-06-a-new-post.md
</code></pre></div><p>2021-04-06 只是一个例子，你换成你当天的日期就好。a-new-post 也只是一个例子，换成你想用的名称就好。</p>
<h4 id="新加一个像-关于httpshugo-hthongtaohcomcnabout-这样的单独页面">新加一个像 <a href="https://hugo-ht.hongtaoh.com/cn/about/" target="_blank" rel="noreferrer noopener">关于</a>

 这样的单独页面</h4>
<p>苹果电脑：先在终端 cd 到你的 Hugo 文件夹，然后在终端输入</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir content/cn/hobby <span style="color:#408080;font-style:italic"># hobby 可以换成别的名字</span>
cp content/cn/about/_index.md content/cn/hobby <span style="color:#408080;font-style:italic"># hobby 可以换成别的名字</span>
open content/cn/hobby/_index.md -a TextEdit 
</code></pre></div><p>更改这个 <code>_index.md</code> 的 Title 和内容即可。</p>
<p>微软系统：</p>
<p>打开 content 文件夹，进入 cn 或者 en 文件夹 （看你是想加一个中文页面，还是英文页面）。新建一个文件夹，起名随意，比如 hobby，然后把 about 文件夹里的 <code>_index.md</code> 复制粘贴到 hobby 文件夹里。打开 hobby文件夹里的 <code>_index.md</code>，更改 Title 和内容即可。如果不想要开头的目录，将 <code>toc: true</code> 改成 <code>toc: false</code>。</p>
<p>不管是苹果还是微软，新加了 hobby 文件夹之后，要想让它出现在网站上，你需要把它加在 config.toml，比如</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[[menu.main]]
    name = <span style="color:#ba2121">&#34;兴趣&#34;</span>
    url = <span style="color:#ba2121">&#34;/hobby/&#34;</span>
    weight = <span style="color:#666">4</span>
</code></pre></div><h4 id="新添加文件">新添加文件<a href="#新添加文件" class="header-anchor" ariaLabel="Anchor"> # </a></h4>
<p>你可以直接把文件，比如 <code>myPDF.pdf</code> 放到 <code>static</code> 文件夹，这样的话，这个文件的地址就是 <code>https://USERNAME.github.io/myPDF.pdf</code>。当你的文件比较多时，建议你在 <code>static</code> 文件夹下新建一个子文件夹，比如 <code>files</code>，然后把文件统一放到 <code>files</code> 里，这样的话，地址就是 <code>https://USERNAME.github.io/files/myPDF.pdf</code></p>
<h3 id="自定义域名">自定义域名<a href="#自定义域名" class="header-anchor" ariaLabel="Anchor"> # </a></h3>
<p><div class="tip">
如果你对 USERNAME.github.io 这个免费域名很满意，就没必要自己再去买域名。
</div></p>
<p>这部分其实很容易。我的域名是在 <a href="https://www.namecheap.com/" target="_blank" rel="noreferrer noopener">Namecheap</a>

 买的。其他地方在设置上应该差不多。这里我就以 Namecheap 举例。</p>
<p>其实，Namecheap 自己已经给出了 <a href="https://www.namecheap.com/support/knowledgebase/article.aspx/9645/2208/how-do-i-link-my-domain-to-github-pages" target="_blank" rel="noreferrer noopener">解决方法</a>

。</p>
<p>按照上面的方法，你在买完域名后，到 Manage 页面里的 Advanced DNS。首先把网站自动加的那两个 Record 删除，在 Namecheap, 网站自动加了 CNAME Record 和 URL Redirect Record, 把这两个先删除。随后，点击 &ldquo;Add New Record&rdquo;，新加四个 A Record, 这四个 Record 的 Host 填 @ , value 分别填下面四个：</p>
<ul>
<li>185.199.108.153</li>
<li>185.199.109.153</li>
<li>185.199.110.153</li>
<li>185.199.111.153</li>
</ul>
<p>其中，185.199.108.153 这个 A Record 的 TTL 选 30 min，其他填 Automatic</p>
<p>然后，加一个 CNAME Record, Host 填 www ， value 填 <code>&lt;username&gt;.github.io</code>，比如我的填 hhao1992.github.io, 随后 TTL 选 30 min。设置如下：</p>
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <a href="https://namecheap.simplekb.com//SiteContents/2-7C22D5236A4543EB827F3BD8936E153E/media/2018-06-20_1804.png"  itemprop="contentUrl"> 
        <img itemprop="thumbnail"
            src="https://namecheap.simplekb.com//SiteContents/2-7C22D5236A4543EB827F3BD8936E153E/media/2018-06-20_1804.png"
            
            />
    </a>
    
    <figcaption>
        <h4>图片来源：Namecheap</h4>
        
    </figcaption>
    
</figure>


<p>这些设置好之后，我们需要让 Github 知道我们想把 <code>https://&lt;username&gt;.github.io</code> 这个网址转到 我们自己买的域名。怎么告诉呢？</p>
<p>Github 的 <a href="https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site" target="_blank" rel="noreferrer noopener">官方指南</a>

 给出了方法。到 <code>&lt;username&gt;/&lt;username&gt;.github.io</code> 这个仓库，找到 Settings, 然后在 GitHub Pages 中的 Custom domain 这里填入我们自己的域名即可。</p>
<figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <a href="https://docs.github.com/assets/images/help/pages/save-custom-subdomain.png"  itemprop="contentUrl"> 
        <img itemprop="thumbnail"
            src="https://docs.github.com/assets/images/help/pages/save-custom-subdomain.png"
            
            />
    </a>
    
    <figcaption>
        <h4>图片来源：GitHub</h4>
        
    </figcaption>
    
</figure>


<p>比如，你买的域名是 example.com，在 Custome domain 这里输入 example.com 就行。</p>
<p>之后，你需要在 github/workflows/gh-pages.yml 最后那里加上 <code>cname: example.com</code>:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-YAML" data-lang="YAML">- <span style="color:#008000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Deploy<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>peaceiris/actions-gh-pages@v3<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#008000;font-weight:bold">with</span>:<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">github_token</span>:<span style="color:#bbb"> </span>${{ secrets.PERSONAL_TOKEN }}<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">publish_branch</span>:<span style="color:#bbb"> </span>gh-pages<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">publish_dir</span>:<span style="color:#bbb"> </span>./public<span style="color:#bbb">
</span><span style="color:#bbb">          </span><span style="color:#008000;font-weight:bold">cname</span>:<span style="color:#bbb"> </span>example.com<span style="color:#bbb">
</span></code></pre></div>
<p style="color:#777;">最后一次修改于 2021-10-05</p>
</div>
<a href="#top"><i class="fa fa-chevron-up" style="font-size: 30px; color: black;"></i></a>

</main>

<footer class="footer">
<script src="https://utteranc.es/client.js"
        repo="hongtaoh/hongtaoh.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
  <script type="text/javascript" src="/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/javascript" src="/js/center-img.js"></script>



     <ul class="footer-links">
      
       
       
       
       <li><a href="/cn/blog/index.xml" type="application/rss+xml" title="RSS feed">
       订阅 </a>
       </li>
       
       
       <li>
       
       <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">
       
        版权
        <i class="fa fa-cc" aria-hidden="true" title="Attribution-NonCommercial-ShareAlike 4.0 International"></i> 
        </a>
       </li>
       
     </ul>
     <div class="copyright-text">
            
            ©
            
            郝鸿涛
            
            2020-2021
            
     </div>
</footer>





